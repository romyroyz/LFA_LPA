<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily LFA Logs</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; padding: 20px; }
        h1 { text-align: center; }
        .log-entry { border: 1px solid #ccc; padding: 15px; margin: 15px 0; background: #f9f9f9; }
        .date-anchor { display: block; padding: 10px; background: #ddd; text-decoration: none; margin-bottom: 5px; }
        .date-anchor:hover { background: #bbb; }
        .sidebar { position: fixed; left: 0; top: 0; width: 200px; height: 100%; background: #eee; padding: 10px; overflow-y: auto; }
        .content { margin-left: 220px; padding: 10px; }
    </style>
</head>
<body>

<div class="sidebar">
    <h3>Logs</h3>
    <div id="log-dates"></div>
</div>

<div class="content">
    <h1>LFA Daily Logs</h1>
    <div id="logs-container"></div>
</div>

<script>
    async function loadLogs() {
        try {
            const response = await fetch("logs.json");
            const logs = await response.json();
            const logContainer = document.getElementById("logs-container");
            const dateContainer = document.getElementById("log-dates");

            logs.forEach(log => {
                let logEntry = document.createElement("div");
                logEntry.classList.add("log-entry");
                logEntry.innerHTML = `
                    <h2 id="${log.date}">${log.date}</h2>
                    <p><strong>Objective:</strong> ${log.objective || log.plan}</p>
                    ${log.sample_pad_treatment ? `<h3>Sample Pad Treatment</h3>
                    <ul>
                        <li><strong>Buffer:</strong> ${log.sample_pad_treatment.buffer}</li>
                        <li><strong>Surfactant:</strong> ${log.sample_pad_treatment.surfactant}</li>
                        <li><strong>Blocking Agent:</strong> ${log.sample_pad_treatment.blocking_agent}</li>
                        <li><strong>Drying Conditions:</strong> ${log.sample_pad_treatment.drying_conditions}</li>
                    </ul>` : ''}
                    ${log.troubleshooting ? `<h3>Troubleshooting</h3>
                    <ul>${log.troubleshooting.risk_factors.map(risk => `<li><strong>${risk.factor}:</strong> ${risk.mitigation_strategy}</li>`).join("")}</ul>` : ""}
                    ${log.image ? `<p><strong>Observation Image:</strong> <a href="${log.image}" target="_blank">View</a></p>` : ""}
                `;
                logContainer.appendChild(logEntry);

                let dateLink = document.createElement("a");
                dateLink.href = `#${log.date}`;
                dateLink.classList.add("date-anchor");
                dateLink.innerText = log.date;
                dateContainer.appendChild(dateLink);
            });

        } catch (error) {
            console.error("Error loading logs:", error);
        }
    }

    window.onload = loadLogs;
</script>

</body>
</html>
