<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LFA Daily Log</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
        }
        #sidebar {
            width: 250px;
            background: #2c3e50;
            color: white;
            height: 100vh;
            overflow-y: auto;
            padding: 20px;
            position: fixed;
        }
        #sidebar h2 {
            text-align: center;
            font-size: 18px;
            margin-bottom: 10px;
        }
        #sidebar a {
            display: block;
            color: white;
            text-decoration: none;
            padding: 10px;
            border-bottom: 1px solid #34495e;
        }
        #sidebar a:hover {
            background: #1abc9c;
        }
        #main {
            margin-left: 270px;
            padding: 20px;
            width: 100%;
        }
        .entry {
            background: #ecf0f1;
            padding: 15px;
            border-left: 5px solid #2980b9;
            margin-bottom: 20px;
        }
        .entry h3 {
            cursor: pointer;
            background: #3498db;
            color: white;
            padding: 10px;
            margin: 0;
            border-radius: 5px;
        }
        .entry h3:hover {
            background: #1abc9c;
        }
        .content {
            display: none;
            padding: 10px;
            background: white;
            margin-top: 5px;
            border-radius: 5px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        th {
            background: #34495e;
            color: white;
        }
    </style>
</head>
<body>

    <div id="sidebar">
        <h2>üìÖ Daily Logs</h2>
        <div id="date-links"></div>
    </div>

    <div id="main">
        <h1>üî¨ LFA Daily Log</h1>
        <div id="log-container"></div>
    </div>

    <script>
        async function loadLogs() {
            const response = await fetch("logs.json");
            const logs = await response.json();
            const logContainer = document.getElementById("log-container");
            const dateLinks = document.getElementById("date-links");

            logContainer.innerHTML = "";
            dateLinks.innerHTML = "";

            logs.forEach((log, index) => {
                let link = document.createElement("a");
                link.href = `#log${index}`;
                link.innerText = log.date;
                dateLinks.appendChild(link);

                let entry = document.createElement("div");
                entry.className = "entry";
                entry.id = `log${index}`;

                let title = document.createElement("h3");
                title.innerText = log.date;
                title.onclick = function () {
                    let content = this.nextElementSibling;
                    content.style.display = content.style.display === "block" ? "none" : "block";
                };
                entry.appendChild(title);

                let content = document.createElement("div");
                content.className = "content";
                content.innerHTML = `
                    <strong>üìú Protocol:</strong> <p>${log.protocol}</p>
                    <strong>üëÄ Observations:</strong> <p>${log.observation}</p>
                    <strong>üñº Image:</strong> <p><a href="${log.image}" target="_blank">${log.image}</a></p>
                    <strong>‚ö†Ô∏è Major Problem:</strong> <p>${log.major_problem}</p>
                    <strong>ü§î Assumption:</strong> <p>${log.assumption}</p>
                    <strong>üîß Problems to Fix in Next Protocol:</strong> <p>${log.next_protocol_fixes}</p>
                    <strong>üõ† Troubleshooting Table:</strong>
                    <table>
                        <tr><th>Risk Factor</th><th>Risk Level</th><th>Possible Reason</th><th>Mitigation</th></tr>
                        ${log.troubleshooting.map(row => `<tr><td>${row["Risk Factor"]}</td><td>${row["Risk Level"]}</td><td>${row["Possible Reason"]}</td><td>${row["Mitigation"]}</td></tr>`).join("")}
                    </table>
                `;
                entry.appendChild(content);
                logContainer.appendChild(entry);
            });
        }

        loadLogs();
    </script>

</body>
</html>
